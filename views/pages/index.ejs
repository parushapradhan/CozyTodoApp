<!DOCTYPE html>
<html>
  <head>
    <title>Cozy game</title>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.86.0/dist/phaser.js"></script>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.86.0/dist/phaser.min.js"></script>
    <link rel="/assets/css/main.css" type="stylesheet" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
  </head>
  <body style="background-color: #5f1c34">
    <div id="settings-menu">
      <div id="music-player">
        <h5>Lofi Player</h5>
        <button id="toggle-music">Play/Pause</button>
        <button id="shuffle-music">Shuffle</button>
      </div>

      <div id="clock">
        <h5>Clock</h5>
        <span id="time"></span>
        <button id="toggle-format">Toggle 12/24hr</button>
      </div>
    </div>

    <!--Navbar-->
    <!-- <nav class="navbar navbar-expand-lg navbar-custom fixed-top">
            <div class="container-fluid d-flex justify-content-between align-items-center">
              <div class="d-flex align-items-center">
                <span class="time-info me-3">Spring 3</span>
                <span class="time-info me-3">Wed</span>
                <span class="time-info">8:30 AM</span>
              </div>
              <div class="gold-info">
                1500 G
              </div>
            </div>
          </nav> -->
    <!-- MUSIC SETTINGS
        Add a slider to adjust the music. The 
        -->

    <input type="range" min="0" max="100" value="0" class="slider" id="wind" />
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="16"
      height="16"
      fill="currentColor"
      class="bi bi-wind"
      viewBox="0 0 16 16"
    >
      <path
        d="M12.5 2A2.5 2.5 0 0 0 10 4.5a.5.5 0 0 1-1 0A3.5 3.5 0 1 1 12.5 8H.5a.5.5 0 0 1 0-1h12a2.5 2.5 0 0 0 0-5m-7 1a1 1 0 0 0-1 1 .5.5 0 0 1-1 0 2 2 0 1 1 2 2h-5a.5.5 0 0 1 0-1h5a1 1 0 0 0 0-2M0 9.5A.5.5 0 0 1 .5 9h10.042a3 3 0 1 1-3 3 .5.5 0 0 1 1 0 2 2 0 1 0 2-2H.5a.5.5 0 0 1-.5-.5"
      />
    </svg>

    <input type="range" min="0" max="100" value="50" class="slider" id="rain" />
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="16"
      height="16"
      fill="currentColor"
      class="bi bi-cloud-lightning-rain"
      viewBox="0 0 16 16"
    >
      <path
        d="M2.658 11.026a.5.5 0 0 1 .316.632l-.5 1.5a.5.5 0 1 1-.948-.316l.5-1.5a.5.5 0 0 1 .632-.316m9.5 0a.5.5 0 0 1 .316.632l-.5 1.5a.5.5 0 1 1-.948-.316l.5-1.5a.5.5 0 0 1 .632-.316m-7.5 1.5a.5.5 0 0 1 .316.632l-.5 1.5a.5.5 0 1 1-.948-.316l.5-1.5a.5.5 0 0 1 .632-.316m9.5 0a.5.5 0 0 1 .316.632l-.5 1.5a.5.5 0 1 1-.948-.316l.5-1.5a.5.5 0 0 1 .632-.316m-.753-8.499a5.001 5.001 0 0 0-9.499-1.004A3.5 3.5 0 1 0 3.5 10H13a3 3 0 0 0 .405-5.973M8.5 1a4 4 0 0 1 3.976 3.555.5.5 0 0 0 .5.445H13a2 2 0 0 1 0 4H3.5a2.5 2.5 0 1 1 .605-4.926.5.5 0 0 0 .596-.329A4 4 0 0 1 8.5 1M7.053 11.276A.5.5 0 0 1 7.5 11h1a.5.5 0 0 1 .474.658l-.28.842H9.5a.5.5 0 0 1 .39.812l-2 2.5a.5.5 0 0 1-.875-.433L7.36 14H6.5a.5.5 0 0 1-.447-.724z"
      />
    </svg>

    <input
      type="range"
      min="0"
      max="100"
      value="50"
      class="slider"
      id="cicadas"
    />
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="16"
      height="16"
      fill="currentColor"
      class="bi bi-bug"
      viewBox="0 0 16 16"
    >
      <path
        d="M4.355.522a.5.5 0 0 1 .623.333l.291.956A5 5 0 0 1 8 1c1.007 0 1.946.298 2.731.811l.29-.956a.5.5 0 1 1 .957.29l-.41 1.352A5 5 0 0 1 13 6h.5a.5.5 0 0 0 .5-.5V5a.5.5 0 0 1 1 0v.5A1.5 1.5 0 0 1 13.5 7H13v1h1.5a.5.5 0 0 1 0 1H13v1h.5a1.5 1.5 0 0 1 1.5 1.5v.5a.5.5 0 1 1-1 0v-.5a.5.5 0 0 0-.5-.5H13a5 5 0 0 1-10 0h-.5a.5.5 0 0 0-.5.5v.5a.5.5 0 1 1-1 0v-.5A1.5 1.5 0 0 1 2.5 10H3V9H1.5a.5.5 0 0 1 0-1H3V7h-.5A1.5 1.5 0 0 1 1 5.5V5a.5.5 0 0 1 1 0v.5a.5.5 0 0 0 .5.5H3c0-1.364.547-2.601 1.432-3.503l-.41-1.352a.5.5 0 0 1 .333-.623M4 7v4a4 4 0 0 0 3.5 3.97V7zm4.5 0v7.97A4 4 0 0 0 12 11V7zM12 6a4 4 0 0 0-1.334-2.982A3.98 3.98 0 0 0 8 2a3.98 3.98 0 0 0-2.667 1.018A4 4 0 0 0 4 6z"
      />
    </svg>

    <input
      type="range"
      min="0"
      max="100"
      value="50"
      class="slider"
      id="birds"
    />
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="16"
      height="16"
      fill="currentColor"
      class="bi bi-feather"
      viewBox="0 0 16 16"
    >
      <path
        d="M15.807.531c-.174-.177-.41-.289-.64-.363a3.8 3.8 0 0 0-.833-.15c-.62-.049-1.394 0-2.252.175C10.365.545 8.264 1.415 6.315 3.1S3.147 6.824 2.557 8.523c-.294.847-.44 1.634-.429 2.268.005.316.05.62.154.88q.025.061.056.122A68 68 0 0 0 .08 15.198a.53.53 0 0 0 .157.72.504.504 0 0 0 .705-.16 68 68 0 0 1 2.158-3.26c.285.141.616.195.958.182.513-.02 1.098-.188 1.723-.49 1.25-.605 2.744-1.787 4.303-3.642l1.518-1.55a.53.53 0 0 0 0-.739l-.729-.744 1.311.209a.5.5 0 0 0 .443-.15l.663-.684c.663-.68 1.292-1.325 1.763-1.892.314-.378.585-.752.754-1.107.163-.345.278-.773.112-1.188a.5.5 0 0 0-.112-.172M3.733 11.62C5.385 9.374 7.24 7.215 9.309 5.394l1.21 1.234-1.171 1.196-.027.03c-1.5 1.789-2.891 2.867-3.977 3.393-.544.263-.99.378-1.324.39a1.3 1.3 0 0 1-.287-.018Zm6.769-7.22c1.31-1.028 2.7-1.914 4.172-2.6a7 7 0 0 1-.4.523c-.442.533-1.028 1.134-1.681 1.804l-.51.524zm3.346-3.357C9.594 3.147 6.045 6.8 3.149 10.678c.007-.464.121-1.086.37-1.806.533-1.535 1.65-3.415 3.455-4.976 1.807-1.561 3.746-2.36 5.31-2.68a8 8 0 0 1 1.564-.173"
      />
    </svg>

    <input type="range" min="0" max="100" value="0" class="slider" id="fire" />
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="16"
      height="16"
      fill="currentColor"
      class="bi bi-fire"
      viewBox="0 0 16 16"
    >
      <path
        d="M8 16c3.314 0 6-2 6-5.5 0-1.5-.5-4-2.5-6 .25 1.5-1.25 2-1.25 2C11 4 9 .5 6 0c.357 2 .5 4-2 6-1.25 1-2 2.729-2 4.5C2 14 4.686 16 8 16m0-1c-1.657 0-3-1-3-2.75 0-.75.25-2 1.25-3C6.125 10 7 10.5 7 10.5c-.375-1.25.5-3.25 2-3.5-.179 1-.25 2 1 3 .625.5 1 1.364 1 2.25C11 14 9.657 15 8 15"
      />
    </svg>

    <!--TODO List-->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const form = document.getElementById("todo-form");
        const input = document.getElementById("todo-input");
        const list = document.getElementById("todo-list");
    
        let todos = JSON.parse(localStorage.getItem("cozyTodos")) || [];
    
        const renderTodos = () => {
          list.innerHTML = "";
          todos.forEach((todo, index) => {
            const li = document.createElement("li");
            li.className = "todo-item";
    
            const checkbox = document.createElement("input");
            checkbox.type = "checkbox";
            checkbox.checked = todo.done;
            checkbox.onchange = () => toggleDone(index);
    
            const span = document.createElement("span");
            span.textContent = todo.text;
            if (todo.done) span.classList.add("done");
    
            const delBtn = document.createElement("button");
            delBtn.textContent = "âœ–";
            delBtn.className = "delete-btn";
            delBtn.onclick = () => deleteTodo(index);
    
            li.appendChild(checkbox);
            li.appendChild(span);
            li.appendChild(delBtn);
            list.appendChild(li);
          });
        };
    
        const toggleDone = (index) => {
          todos[index].done = !todos[index].done;
          saveTodos();
        };
    
        const deleteTodo = (index) => {
          todos.splice(index, 1);
          saveTodos();
        };
    
        const saveTodos = () => {
          localStorage.setItem("cozyTodos", JSON.stringify(todos));
          renderTodos();
        };
    
        form.onsubmit = (e) => {
          e.preventDefault();
          const text = input.value.trim();
          if (text) {
            todos.push({ text, done: false });
            saveTodos();
            input.value = "";
          }
        };
    
        renderTodos();
      });
    </script>

    <!--Timer-->
    <%- include('../components/notebook') %>

    <!-- Room Scene -->
    <!-- <div class="container text-center">
            <canvas id="gameCanvas" class="mx-auto d-block"></canvas>
          </div> -->
    <!-- <canvas id="gameCanvas"></canvas> -->
    <!-- <script src="game.js" defer></script> -->
    <img
      src="/assets/images/226539456-1727243746.webp"
      alt="Room"
      class="img-fluid mx-auto d-block"
      style="max-width: 90%; height: auto; margin-top: 50px"
    />
    <!--Music player -->

    <script src="/assets/js/howler.min.js"></script>
    <script>
      // control multiple sounds
      var birds = new Howl({
        src: ["/assets/music/birds.mp3"],
        loop: true,
      });

      var cicadas = new Howl({
        src: ["/assets/music/cicadas.mp3"],
        loop: true,
      });

      var fire = new Howl({
        src: ["/assets/music/fire.mp3"],
        loop: true,
      });

      var rain = new Howl({
        src: ["/assets/music/rain.mp3"],
        loop: true,
      });

      var wind = new Howl({
        src: ["/assets/music/wind.mp3"],
        loop: true,
      });

      // Play returns a unique Sound ID that can be passed
      // into any method on Howl to control that specific sound.
      let birdsSoundPlayer = birds.play();
      let cicadasSoundPlayer = cicadas.play();
      let fireSoundPlayer = fire.play();
      let rainSoundPlayer = rain.play();
      let windSoundPlayer = wind.play();
      // Fade out the first sound and speed up the second.
      // sound.fade(1, 0, 1000, id1);
      // sound.rate(1.5, id2);

      const birdsSlider = document.getElementById("birds");
      const cicadasSlider = document.getElementById("cicadas");
      const windSlider = document.getElementById("wind");
      const rainSlider = document.getElementById("rain");
      const fireSlider = document.getElementById("fire");

      birdsSlider.addEventListener("input", updateValue);
      cicadasSlider.addEventListener("input", updateValue);
      windSlider.addEventListener("input", updateValue);
      rainSlider.addEventListener("input", updateValue);
      fireSlider.addEventListener("input", updateValue);

      function updateValue(e) {
        soundPlayer = getSoundPlayer(e.target.id);
        soundPlayer.volume(e.target.value / 100);
      }

      function getSoundPlayer(id) {
        if (id == "birds") return birds;
        if (id == "cicadas") return cicadas;
        if (id == "wind") return wind;
        if (id == "rain") return rain;
        if (id == "fire") return fire;
      }
    </script>

    <!--Game engine-->

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script src="/assets/js/clock.js" defer></script>
    <script src="/assets/js/musicPlayer.js" defer></script>
    <script src="/assets/js/timer.js"></script>
  </body>
</html>
